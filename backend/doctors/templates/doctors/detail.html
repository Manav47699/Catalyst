<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ doctor.doctor_name }}</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f9f9f9; }
        h1, h2 { margin-bottom: 10px; }
        img { border-radius: 10px; }
        button { padding: 10px 20px; font-size: 16px; cursor: pointer; }
        #appointmentModal { display: none; position: fixed; top:0; left:0; width:100%; height:100%; 
                            background: rgba(0,0,0,0.5); justify-content:center; align-items:center; z-index:1000; }
        #appointmentModal div { background:#fff; padding:30px; border-radius:10px; width:400px; max-width:90%;
                                position: relative; box-shadow:0 5px 15px rgba(0,0,0,0.3); }
        #closeModal { position:absolute; top:10px; right:15px; font-size:24px; cursor:pointer; }
        form button { width: 100%; background-color: #0070f3; color: #fff; border: none; border-radius: 5px; }
    </style>
</head>
<body>

<div style="max-width: 800px; margin: 30px auto; padding: 20px; border: 1px solid #ddd; border-radius: 10px; background: #fff;">

    <!-- Doctor Info -->
    <div style="text-align: center;">
        <h1>{{ doctor.doctor_name }}</h1>
        <img src="{{ doctor.photo.url }}" alt="{{ doctor.doctor_name }}" style="width:200px;">
        <p style="margin-top: 15px;">{{ doctor.qualifications }}</p>
    </div>

    <!-- Make Appointment Button -->
    <div style="text-align: center; margin-top: 20px;">
        <button id="openModalBtn" style="background-color: #4CAF50; color:white; border:none; border-radius:5px;">
            Make an Appointment
        </button>
    </div>

</div>

<!-- Modal -->
<div id="appointmentModal">
    <div>
        <span id="closeModal">&times;</span>

        <h2 style="text-align:center; margin-bottom:20px;">Book Appointment</h2>

        <form method="post">
            {% csrf_token %}
            {{ form.as_p }}
            <button type="submit">Pay with Stripe</button>
        </form>

    </div>
</div>

<!-- Modal Script -->
<script>
    const modal = document.getElementById("appointmentModal");
    const btn = document.getElementById("openModalBtn");
    const close = document.getElementById("closeModal");

    btn.onclick = () => { modal.style.display = "flex"; }
    close.onclick = () => { modal.style.display = "none"; }
    window.onclick = (e) => { if(e.target === modal) { modal.style.display = "none"; } }
</script>

</body>
</html>
